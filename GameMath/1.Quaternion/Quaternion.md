# 쿼터니온(Quaternion)

# 1. 복소수
쿼터니온(사원수)은 복소수를 일반화한 것이라 할 수 있다.   
따라서 사원수를 이해하기 위해서는 먼저 복소수에 대해서 알아야 한다.   
복소수를 알면 왜 단위 사원수가 관여하는 사원수 끼리의 곱셈이 3차원 공간의 한 벡터 또는 점 P의 3차원 회전에 해당하는지를 증명할 수 있다.

## 1.1 정의
복소수는 여러가지 형식으로 표현되지만 핵심은 복소수는 실수부와 허수부 이렇게 2가지의 요소로 이루어져 있다는 것이다.   
여기 하나의 복소수 z가 있다고 하고 그 복소수의 실수부를 a, 허수부를 b라 한다면   
**z = (a,b)** 이렇게 순서쌍으로도 표현이 가능하다.   
또한 이러한 복소수들에 대해 상등 비교와 사칙연산(덧셈, 뺄셈, 곱셈, 나눗셈)이 가능하다. 그 정의들은 다음과 같다.   
<pre>
<code>
1. 만일 a = c이고 b = d이면, 그리고 오직 그럴 때에만 (a,b) = (c,d)이다.
2. (a,b) ± (c,d) = (a ± c ± b ± d).
3. (a,b)(c,d) = (ac - bd, ad + bc).
4. (a,b) / (c,d) = (ac + bd / c*c + d*d, bc - ad / c*c + d*d). 단 (c,d) ≠ (0,0)일 때에만.
</code>
</pre>

그리고 또 복소수를 허수단위 **i**를 이용해서 표현하는 방법이 존재하는데   
허수단위 i = (0,1)라 정의하면 i*i는 복소수 곱셈 공식에 의해   
i * i = (0,1)(0,1) = (-1,0) = -1 이 된다.   
**즉 i는 방정식 x * x = -1의 근임을 뜻한다.**   
이 허수단위 i를 이용해서 복소수 (a,b)를 a + ib의 형태로 표기 가능하다.   
그리고 이 형태를 이용해서 복소수의 사칙연산을 다시 정의하면 다음과 같다.   
<pre>
<code>
1. a + ib ± c + id = (a ± c) + i(b ± d).
2. (a + ib)(c + id) = (ac - bd) + i(ad + bc).
3. (a + ib) / (c + id) = (ac + bd)/(c*c + d*d) + i(bc - ad)/(c*c + d*d). 단 (c,d) ≠ (0,0)일 때에만.
</code>
</pre>

## 1.2 기하학적 해석
복소수는 또한 복소평면 이라고 부르는 2차원 평면의 점 또는 벡터로 표현 가능하다.   
실제로 복소수끼리의 덧셈의 정의는 벡터 덧셈의 정의와 일치한다.   

또한 복소수 a+ib의 크기는 그 복소수가 나타내는 벡터의 길이로 정의된다.   
그리고 그 **크기가 1인 복소수를 단위복소수**라고 부른다.   

## 1.3 극좌표 표현과 회전
![Alt text](https://github.com/quattroro/Programing-Tip-List/blob/main/GameMath/1.Quaternion/Quaternion_Picture_1.png)   
위의 그림과 같이 a + ib 복소수를 극좌표를 이용해서 표현하는 것을 복소수의 극좌표 표현 또는 극형식 이라고 한다.   


![Alt text](https://github.com/quattroro/Programing-Tip-List/blob/main/GameMath/1.Quaternion/Quaternion_Picture_2.png)   
그리고 위의 그림과 같이 복소수 $$Z_{1}$$과 $$Z_{2}$$가 있다고 하고 두 복소수를 곱하면  
***
$$Z_{1}Z_{2} = AB(cos\theta_{1}cos\theta_{2} - sin\theta_{1}sin\theta_{2} + i(cos\theta_{1}sin\theta_{2} + sin\theta_{1}cos\theta_{2}))$$   
***
이렇게 전개가 가능하다. 이 전개식을 다시 삼각함수의 덧셈정리를 이용해서 정리하면 최종적으로   
***
$$Z_{1}Z_{2} = AB(cos(\theta_{1} + \theta_{2}) + isin(\theta_{1} + \theta_{2}))$$   
***
이런 모습이 된다.
즉 두 복소수 $$Z_{1}$$ 와 $$Z_{2}$$ 의 곱은 AB의 길이를 가지고 $$\theta_{1} + \theta_{2}$$ 만큼의 각도를 가진 또 다른 복소수가 된다.   

# 2. 사원수

## 2.1 사원수 정의
실수 4개의 순서쌍 q = (x,y,z,w)는 하나의 사원수이다. 이를 흔히 q = (u,w) = (x,y,z,w)로 줄여 쓴다.   
그리고 u = (x,y,z)를 사원수의 허수 벡터부, 줄여서 '벡터부'라고 부르고, 나머지 w를 실수부라고 부른다.   
더 나아가 이러한 사원수들로 상등 비교와 덧셈, 뺄셈, 곱셈이 가능하다. 그 정의는 다음과 같다.   
<pre>
<code>
1. 만일 u = v이고 a = b이면, 그리고 오직 그럴 때에만, (u,a) = (v,b).
2. (u,a) ± (v,b) = (u ± v, a ± b).
3. (u,a)(v,b) = (av + bu + u x v, ab - u·v)
</code>
</pre>

## 2.2 사원수 연산의 성질
사원수 곱셈은 교환법칙을 만족하지 않는다. 예) ij = -ji   
하지만 사원수 곱셈은 덧셈에 대한 분배법칙을 만족한다. 즉, p(q + r) = pq + pr이고 (q + r)p = qp + rp이다.   

## 2.3 켤레와 크기
사원수 $$q = (q_{1},q_{2},q_{3},q_{4}) = (u,q_{4})$$ 의 켤레를 $$q^{\ast}$$으로 표기한다. 켤레 사원수의 정의는 다음과 같다.
***
$$q^{\ast} = (-q_{1},-q_{2},-q_{3},q_{4}) = (-u,q_{4})$$
***
다른 말로 하면, 한 사원수의 켤레는 그냥 허수 벡터부의 부호를 반대로한 것이다.   
켤레 사원수들은 다음과 같음 성질을 가지고 있다.
***
1. $$(pq)^{\ast} = q^{\ast}p^{\ast}$$
2. $$(p+q)^{\ast} = p^{\ast} + q^{\ast}$$
3. $$(q^{\ast})^{\ast} = q$$
4. $$s \in R에 대해 (sq)^{\ast} = sq^{\ast}$$
5. $$q + q^{\ast} = (u, q_{4}) + (-u, q_{4}) = (0,2q_{4}) = 2q_{4}$$
6. $$qq^{\ast} = q^{\ast}q = {q_{1}}^{2} + {q_{2}}^{2} + {q_{3}}^{2} +{q_{4}}^{2} = \left\|q\right\|^{2} + {q_{4}^{2}}$$
***
